# åŸºç¡€é…ç½®

## é…ç½®ä»‹ç»

æœ¬ç¯‡å¹…çš„æ–‡ç« ä¼šå¯¹ `Web` ç«¯çš„æ¯ä¸€é¡¹é…ç½®åšè¯¦ç»†çš„ä»‹ç»ï¼Œå¦‚æœä½ æƒ³æŸ¥çœ‹ `MorJS` å…¨éƒ¨é…ç½®ï¼Œå¯ä»¥åˆ°ç‚¹å‡» [MorJS é…ç½®](/guides/basic/config) ã€‚

é€šè¿‡ [å¿«é€Ÿä¸Šæ‰‹](/web/basic/quickstart) ä½ å·²ç»å®Œæˆäº† `Web` ç«¯çš„ç¼–è¯‘é…ç½®ï¼Œæ­¤æ—¶æ‰“å¼€é¡¹ç›®çš„ `mor.config.ts`ï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹é…ç½® ğŸ‘ï¼š

```ts
import { defineConfig } from '@morjs/cli'

export default defineConfig([
  {
    name: 'ali',
    sourceType: 'alipay',
    target: 'alipay',
    compileType: 'miniprogram',
    compileMode: 'bundle'
  },
  {
    name: 'wechat',
    sourceType: 'alipay',
    target: 'wechat',
    compileType: 'miniprogram',
    compileMode: 'bundle'
  },
  {
    name: 'web',
    sourceType: 'alipay',
    target: 'web',
    compileType: 'miniprogram',
    compileMode: 'bundle',

    // web ç«¯é…ç½®é¡¹ï¼Œä¸‹æ–¹ä»‹ç»çš„é…ç½®é¡¹éƒ½å°†åœ¨è¿™é‡Œè¿›è¡Œé…ç½®
    web: {}
  }
])
```

å¥½äº†ï¼Œå‡†å¤‡å·¥ä½œå·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹ä»‹ç»é…ç½® ğŸš€

### globalComponentsConfig

| æ˜¯å¦å¿…å¡« | å‚æ•°ç±»å‹ |                                                é»˜è®¤å€¼                                                |                å‚æ•°å«ä¹‰                |
| :------: | :------: | :--------------------------------------------------------------------------------------------------: | :------------------------------------: |
|    å¦    |  object  | [ç‚¹å‡»æŸ¥çœ‹](https://github.com/eleme/morjs/tree/master/packages/runtime-web/src/components/config.ts) | ç”¨äºé…ç½® å°ç¨‹åºç»„ä»¶=>web ç»„ä»¶ çš„æ˜ å°„è¡¨ |

èƒŒæ™¯è¡¥å……è¯´æ˜ï¼šå°†å°ç¨‹åºçš„ä»£ç è½¬æ¢æˆ `Web` ç«¯çš„ä¸€ä¸ªå‰ææ˜¯ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `Web` ç«¯ 1:1 å®ç°å°ç¨‹åºæ”¯æŒçš„ç»„ä»¶ã€‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç»´æŠ¤äº†ä¸€å¼ æ˜ å°„è¡¨ï¼Œåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­å°†å°ç¨‹åºçš„ç»„ä»¶è¿›è¡Œæ›¿æ¢ï¼Œæ¯”å¦‚ `view` ç»„ä»¶ï¼Œæˆ‘ä»¬å°†å…¶æ›¿æ¢æˆäº† `tiga-view`ï¼Œé‚£ä¹ˆ `tiga-view` ä»å“ªé‡Œæ¥å‘¢ï¼Ÿå®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨ 1:1 å®ç°å°ç¨‹åºçš„æ—¶å€™ä½¿ç”¨äº† `Web Components`ï¼ˆé€‰ç”¨ `Google` å¼€æºçš„ [lit](https://lit.dev/)ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨é¡¹ç›®è¿è¡Œæ—¶ï¼Œåœ¨é¡¶éƒ¨å°† `tiga-view` è¿™ä¸ªè‡ªå®šä¹‰ç»„ä»¶æ³¨å†Œå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚

å¦‚æœæˆ‘ä»¬é‡åˆ°äº†ä»¥ä¸‹åœºæ™¯æˆ‘ä»¬å¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨ `globalComponentsConfig` é…ç½®:

1. åœ¨ `Web`ç«¯ éœ€è¦é€šè¿‡æ¡ä»¶ç¼–è¯‘æ¸²æŸ“ä¸€äº›å°ç¨‹åºä¸æ”¯æŒçš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ç›´æ¥ä½¿ç”¨ `web-components` å®ç°;
2. `MorJS` æä¾›çš„ç»„ä»¶å®ç°å’Œæ”¯ä»˜å®å°ç¨‹åºæ˜¯ä¸€è‡´çš„ï¼Œæ— æ³•å®šåˆ¶ï¼Œéœ€è¦ä½¿ç”¨ `web-components` å®ç°ä¸€äº›å®šåˆ¶ç»„ä»¶ã€‚

> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¦é…ç½®æ­¤é¡¹ï¼Œä½ éœ€è¦å°†è‡ªå®šä¹‰çš„ web-components æå‰æ³¨å†Œï¼Œä¸€èˆ¬è¦ä¹ˆè‡ªå®šä¹‰ entryï¼Œè¦ä¹ˆåœ¨ htmlOptions é…ç½®ä¸­è‡ªå®šä¹‰ templateContentï¼Œç„¶ååœ¨é¡¶éƒ¨å¼•å…¥ã€‚ä»¥ä¸Šä¸¤ä¸ªé…ç½®æ¥ä¸‹æ¥æˆ‘ä»¬éƒ½ä¼šä»‹ç»

é…ç½®ç¤ºä¾‹ ğŸŒ°ï¼š

```ts
...
web: {
  globalComponentsConfig: {
    'view': 'custom-view'ï¼Œ // å°† view æ˜ å°„åˆ°è‡ªå®šä¹‰çš„ custom-view ç»„ä»¶
  }
}
...
```

### styleScope

| æ˜¯å¦å¿…å¡« | å‚æ•°ç±»å‹ | é»˜è®¤å€¼ |       å‚æ•°å«ä¹‰       |
| :------: | :------: | :----: | :------------------: |
|    å¦    | boolean  | false  | é…ç½®æ˜¯å¦å¼€å¯æ ·å¼éš”ç¦» |

ä¸ºäº†é¿å…å„é¡µé¢æˆ–è€…å„ä¸ªç»„ä»¶ä¹‹é—´çš„æ ·å¼ç›¸äº’å½±å“ï¼Œå¯ä»¥æ‰“å¼€æ­¤å¼€å…³ã€‚æ‰“å¼€æ­¤å¼€å…³åï¼ŒMorJS åœ¨ç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨ç»™ `class` æ‰“ä¸Š `hash` å€¼ã€‚å¦‚æœé¡¹ç›®ä¸­å­˜åœ¨ `page` ä¸­æ ·å¼å…±äº«ç»™ `component` çš„åœºæ™¯ï¼Œè¯·ä¸è¦æ‰“å¼€æ­¤å¼€å…³ã€‚é™¤äº†æ­¤å¼€å…³ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†å…¶å®ƒæ–¹å¼å¯ç”¨æ ·å¼éš”ç¦»ï¼š

1. åœ¨ `app.json` ä¸­å¢åŠ  `styleScope: true`ï¼Œæ­¤åŠŸèƒ½ä¹Ÿæ˜¯å…¨å±€å¼€å¯æ ·å¼éš”ç¦»ã€‚
2. åœ¨ `page or components` çš„ `.json` æ–‡ä»¶ä¸­é…ç½® `styleScope: true`ï¼Œæ­¤é…ç½®å¯ä»¥å¼€å¯é¡µé¢çº§/ç»„ä»¶çº§æ ·å¼éš”ç¦»ã€‚

### rpxRootValue

| æ˜¯å¦å¿…å¡« | å‚æ•°ç±»å‹ | é»˜è®¤å€¼ |           å‚æ•°å«ä¹‰            |
| :------: | :------: | :----: | :---------------------------: |
|    å¦    |  number  |   32   | rpx è½¬æ¢æˆ rem å•ä½æ—¶çš„åŸºå‡†å€¼ |

é»˜è®¤æƒ…å†µä¸‹ï¼ŒMorJS åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šå°† `rpx` æ ·å¼å•ä½è½¬æ¢æˆ `rem`ï¼Œè€Œ `rem` çš„è®¡ç®—å…¬å¼ä¸º `toFixed(pixel/rpxRootValue, 5)`ã€‚

> è½¬æ¢æˆ rem å•ä½åï¼Œä¸šåŠ¡å¯é€šè¿‡ `responsiveRootFontSize` é…ç½®è¾¾åˆ°å“åº”å¼çš„ç›®çš„ã€‚1rem = html font-sizeï¼Œç°åœ¨å„ä¸»æµæµè§ˆå™¨é»˜è®¤ html font-size çš„å¤§å°ä¸º 16pxã€‚

### responsiveRootFontSize

| æ˜¯å¦å¿…å¡« | å‚æ•°ç±»å‹ | é»˜è®¤å€¼ |                                                 å‚æ•°å«ä¹‰                                                 |
| :------: | :------: | :----: | :------------------------------------------------------------------------------------------------------: |
|    å¦    |  number  |   -    | è®¾ç½® html çš„ font-size å€¼å¤§å°ï¼Œä¸”è¯¥å€¼è®¾å®šä¹‹åä¼šç›‘å¬çª—å£ resize äº‹ä»¶ï¼Œä»¥ 375 å±å¹•ä¸ºåŸºå‡†åŠ¨æ€è°ƒæ•´ font-size |

è¯¥é…ç½®å¼€å¯åï¼Œ`html font-size` çš„è®¡ç®—å…¬å¼ä¸º `((rootFontSize * window.document.documentElement.clientWidth) / 375 + 'px')`ã€‚ä¸€èˆ¬æˆ‘ä»¬å»ºè®®å°†è¯¥å€¼æ‰‹åŠ¨è®¾å®šä¸º `16`ã€‚ï¼ˆ`rpxRootValue` é»˜è®¤å€¼ä¸º 32ï¼Œ è¿™æ„å‘³ç€ `32rpx` å°†ä¸ºè½¬æ¢æˆ `1rem`ï¼Œ`responsiveRootFontSize` è®¾å®šä¸º `16` ä¹‹åï¼Œ ä¼šä½¿ `32rpx = 1rem = 16px` ç­‰å¼æˆç«‹ï¼Œå’Œå°ç¨‹åºé€»è¾‘æ˜¯ä¸€è‡´çš„ï¼‰

### needRpx

| æ˜¯å¦å¿…å¡« | å‚æ•°ç±»å‹ | é»˜è®¤å€¼ |                        å‚æ•°å«ä¹‰                        |
| :------: | :------: | :----: | :----------------------------------------------------: |
|    å¦    | boolean  |  true  | è®¾ç½®ä¸º true ä¼šè‡ªåŠ¨å¼€å¯ rpx è½¬ remï¼Œè®¾ç½®ä¸º false åˆ™å…³é—­ |

æœ‰äº›ä¸šåŠ¡åœºæ™¯å¯èƒ½éœ€è¦è‡ªå®šä¹‰å“åº”å¼æ–¹æ¡ˆï¼Œæ¯”å¦‚ä½¿ç”¨ [postcss-rpx2vw](https://www.npmjs.com/package/postcss-px2vw), æ‰€ä»¥æä¾›æ­¤é…ç½®å…³é—­ MorJS çš„é»˜è®¤è½¬æ¢åŠŸèƒ½ã€‚

> å¯ä½¿ç”¨ mor æš´éœ²å‡ºæ¥çš„ [webpackChain](/guides/basic/config#webpackchain) åŠŸèƒ½å¯¹æ ·å¼å¤„ç†åšè‡ªå®šä¹‰å¤„ç†ã€‚

### usePx

| æ˜¯å¦å¿…å¡« | å‚æ•°ç±»å‹ | é»˜è®¤å€¼ |                                               å‚æ•°å«ä¹‰                                               |
| :------: | :------: | :----: | :--------------------------------------------------------------------------------------------------: |
|    å¦    |  object  |   -    | æ¥å—ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡å†…æœ‰ä¸€ä¸ªå‚æ•° ratioï¼Œç”¨äºæŒ‡å®š rpx è½¬ px çš„æ¯”ä¾‹ï¼Œå®é™…è®¡ç®—çš„ px å€¼ = (rpx å€¼ / ratio) |

ä½¿ç”¨æ­¤é…ç½®çš„åœºæ™¯ä¸€èˆ¬æ˜¯ä½¿ç”¨ MorJS æä¾›çš„åŠŸèƒ½å°† `rpx` å•ä½è½¬æ¢æˆ `px` å•ä½ï¼Œç„¶åä½¿ç”¨ `postcss` çš„æ’ä»¶åšè‡ªå®šä¹‰çš„åŠŸèƒ½ï¼ˆ`postcss` ç”Ÿæ€ä¸­çš„å¤§éƒ¨åˆ†æ’ä»¶éƒ½æ˜¯é’ˆå¯¹ `px` å•ä½åšå¤„ç†çš„ï¼‰ã€‚

### showHeader

| æ˜¯å¦å¿…å¡« |    å‚æ•°ç±»å‹    | é»˜è®¤å€¼ |                                            å‚æ•°å«ä¹‰                                             |
| :------: | :------------: | :----: | :---------------------------------------------------------------------------------------------: |
|    å¦    | booleanï¼Œarray |  true  | æ§åˆ¶æ˜¯å¦å±•ç¤ºé»˜è®¤çš„å¯¼èˆªæ (æ•°ç»„ç±»å‹å¯ä»¥æŒ‡å®š `app.json` ä¸­çš„ `pages` è·¯å¾„ï¼Œç”¨äºè®¾ç½®éœ€è¦å¼€å¯çš„é¡µé¢) |

åœ¨å†…åµŒåœ¨å®¹å™¨çš„åœºæ™¯ä¸‹ï¼Œä¸ºäº†é¿å…åŒå¯¼èˆªæ æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨è¯¥é…ç½®å°† MorJS æä¾›çš„å¯¼èˆªæ å…³é—­ã€‚

æœ‰ä»¥ä¸‹ä¸¤ç§åœºæ™¯å¯èƒ½éœ€è¦åŠ¨æ€éšè—å¯¼èˆªæ çš„åŠŸèƒ½ï¼š

1. `MorJS` è½¬ `Web` é¡µé¢é€šè¿‡ `webview` ç»„ä»¶å†…åµŒå¦ä¸€ä¸ª é€šè¿‡ `MorJS` è½¬å‡ºæ¥çš„ `Web` é¡µé¢ï¼ˆè¿™æ—¶å€™ä¼šæœ‰ä¸¤ä¸ª MorJS æä¾›çš„å¤´éƒ¨ï¼‰
2. `MorJS` è½¬ `Web` é¡µé¢å†…åµŒåœ¨å°ç¨‹åºçš„ `webview` ç»„ä»¶å†…

åŸºäºä»¥ä¸Šä¸¤ç§åœºæ™¯ï¼Œæˆ‘ä»¬æä¾›äº†åŠ¨æ€éšè—å¤´éƒ¨çš„èƒ½åŠ›ï¼Œåœ¨ `url` ä¸Šå¢åŠ  `hide-header=1` å³å¯å°†å½“å‰é¡µé¢çš„å¤´éƒ¨éšè—æ‰ã€‚

### showBack

| æ˜¯å¦å¿…å¡« |    å‚æ•°ç±»å‹    | é»˜è®¤å€¼ |                                                å‚æ•°å«ä¹‰                                                 |
| :------: | :------------: | :----: | :-----------------------------------------------------------------------------------------------------: |
|    å¦    | booleanï¼Œarray | false  | æ§åˆ¶æ˜¯å¦åœ¨å¯¼èˆªæ ä¸Šå±•ç¤ºè¿”å›ç®­å¤´(æ•°ç»„ç±»å‹ä¸‹å¯ä»¥æŒ‡å®š `app.json` ä¸­çš„ `pages` è·¯å¾„ï¼Œç”¨äºè®¾ç½®éœ€è¦å¼€å¯çš„é¡µé¢) |

ç‚¹å‡»è¿”å›ç®­å¤´ä¼šè°ƒç”¨ `my.navigateBack()` å°è¯•è¿”å›ï¼Œå¦‚æœä½ çš„é¡µé¢å†…åµŒåœ¨ `app` å†…ï¼Œä½¿ç”¨è¯¥æ–¹æ³•æ— æ³•è¿”å›ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ `window.addEventListener('tiga-back', () => { // è¿”å›é€»è¾‘ } )`ã€‚

### appConfig

| æ˜¯å¦å¿…å¡« | å‚æ•°ç±»å‹ | é»˜è®¤å€¼ |        å‚æ•°å«ä¹‰        |
| :------: | :------: | :----: | :--------------------: |
|    å¦    |  object  |  null  | ç”¨äºè®¾ç½®ä¸€äº›å…¨å±€çš„é…ç½® |

ç›®å‰æ”¯æŒçš„é…ç½®å¦‚ä¸‹ï¼š

|          å‚æ•°å          | å‚æ•°ç±»å‹ |                                é»˜è®¤å€¼                                |                                                                                                                                                                                                            å‚æ•°å«ä¹‰                                                                                                                                                                                                             |
| :----------------------: | :------: | :------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|      apiNoConflict       | boolean  |                                 true                                 | è®¾ç½®ä¸º `true` è¯´æ˜ä¸è¦†ç›–å·²å­˜åœ¨ `my.*` ä¸Šå­˜åœ¨çš„æ–¹æ³•ï¼Œè®¾ç½®ä¸º `false` ä»£è¡¨è¦è¦†ç›–å·²æœ‰çš„æ–¹æ³•ã€‚<br/> åœ¨æ”¯ä»˜å®å°ç¨‹åº `webview` å†…åµŒç½‘é¡µçš„æ—¶å€™ï¼Œä¼šåœ¨ `my` å¯¹è±¡ä¸Šè®¾ç½® [æ–¹æ³•](https://opendocs.alipay.com/mini/component/web-view#%E5%8F%AF%E7%94%A8%20API)ï¼Œè¿™ä¸ªæ—¶å€™å®¹å™¨å†…ç½®çš„æ–¹æ³•åç§°ä¼šå’Œ MorJS æä¾›çš„æœ‰å†²çªï¼Œè®¾ç½®ä¸º `true` ä»£è¡¨æœ‰å†²çªçš„æ—¶å€™ï¼Œä¼˜å…ˆä½¿ç”¨å®¹å™¨å†…ç½®çš„æ–¹æ³•ï¼Œè®¾ç½®ä¸º `false` ä»£è¡¨ä½¿ç”¨ `MorJS`æä¾›çš„æ–¹æ³•è¦†ç›–æ‰å®¹å™¨æä¾›çš„é»˜è®¤æ–¹æ³• |
|      components.map      |  object  |                                 null                                 |                                                                                                                                                                                           ç»™åœ°å›¾ç»„ä»¶ä¼ é€’é…ç½®ï¼ˆ`key,version,sdk` ç­‰ï¼‰                                                                                                                                                                                            |
| components.video.cdnUrl  |  string  |                  https://cdn.plyr.io/3.7.3/plyr.js                   |                                                                                                                                                                      `video` ç»„ä»¶æ˜¯åŸºäº [Plyr](https://plyr.io/) å®ç°çš„ï¼Œæ­¤é…ç½®ç”¨äºè‡ªå®šä¹‰è¯¥åº“çš„ `cdn` åœ°å€                                                                                                                                                                      |
| components.swiper.cdnUrl |  string  | https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.2/js/swiper.min.js |                                                                                                                                                                  `swiper` ç»„ä»¶æ˜¯åŸºäº [Swiper](https://swiperjs.com/) å®ç°çš„, æ­¤é…ç½®ç”¨äºè‡ªå®šä¹‰è¯¥åº“çš„ `cdn` åœ°å€                                                                                                                                                                  |

å‚è€ƒç”¨ä¾‹å¦‚ä¸‹ ğŸ‘‡ğŸ»:

```
web: {
  appConfig: {
    apiNoConflict: false,
    components: {
      // sdk å’Œ version çš„æŒ‡å®šå‚è€ƒ https://lbs.amap.com/api/jsapi-v2/guide/abc/load
      map: {
        sdk: '', // åœ°å›¾ sdk åœ°å€
        version: '', // åœ°å›¾ sdk ç‰ˆæœ¬
        key: '', // åœ°å›¾ keyï¼Œç”³è¯·è¯·å‚è€ƒ https://lbs.amap.com/api/webservice/gettingstarted
      },
      video: {
        cdnUrl: '', // è‡ªå®šä¹‰çš„ plyr sdk cdn åœ°å€
      },

    }
  }
}
```

### å…¶å®ƒ

å…¶å®ƒå·¥ç¨‹çº¬åº¦çš„é…ç½®å¯ä»¥ç›´æ¥å‚è€ƒ [æ­¤å¤„](/guides/basic/config#web)
