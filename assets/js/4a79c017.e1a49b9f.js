"use strict";(self.webpackChunkmorjs_site=self.webpackChunkmorjs_site||[]).push([[5530],{9613:(n,e,r)=>{r.d(e,{Zo:()=>u,kt:()=>d});var t=r(9496);function o(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function i(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,t)}return r}function s(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){o(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function a(n,e){if(null==n)return{};var r,t,o=function(n,e){if(null==n)return{};var r,t,o={},i=Object.keys(n);for(t=0;t<i.length;t++)r=i[t],e.indexOf(r)>=0||(o[r]=n[r]);return o}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(t=0;t<i.length;t++)r=i[t],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}var p=t.createContext({}),l=function(n){var e=t.useContext(p),r=e;return n&&(r="function"==typeof n?n(e):s(s({},e),n)),r},u=function(n){var e=l(n.components);return t.createElement(p.Provider,{value:e},n.children)},m="mdxType",c={inlineCode:"code",wrapper:function(n){var e=n.children;return t.createElement(t.Fragment,{},e)}},f=t.forwardRef((function(n,e){var r=n.components,o=n.mdxType,i=n.originalType,p=n.parentName,u=a(n,["components","mdxType","originalType","parentName"]),m=l(r),f=o,d=m["".concat(p,".").concat(f)]||m[f]||c[f]||i;return r?t.createElement(d,s(s({ref:e},u),{},{components:r})):t.createElement(d,s({ref:e},u))}));function d(n,e){var r=arguments,o=e&&e.mdxType;if("string"==typeof n||o){var i=r.length,s=new Array(i);s[0]=f;var a={};for(var p in e)hasOwnProperty.call(e,p)&&(a[p]=e[p]);a.originalType=n,a[m]="string"==typeof n?n:o,s[1]=a;for(var l=2;l<i;l++)s[l]=r[l];return t.createElement.apply(null,s)}return t.createElement.apply(null,r)}f.displayName="MDXCreateElement"},3129:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>p,contentTitle:()=>s,default:()=>c,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var t=r(1163),o=(r(9496),r(9613));const i={},s="Hooks",a={unversionedId:"api/engineering-hooks",id:"api/engineering-hooks",title:"Hooks",description:"\u4ecb\u7ecd",source:"@site/docs/api/engineering-hooks.md",sourceDirName:"api",slug:"/api/engineering-hooks",permalink:"/api/engineering-hooks",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"apiSidebar",previous:{title:"API \u4ecb\u7ecd",permalink:"/api/"},next:{title:"Takin \u4ecb\u7ecd",permalink:"/api/takin"}},p={},l=[{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:2},{value:"\u57fa\u7840 Hooks",id:"\u57fa\u7840-hooks",level:2},{value:"\u7f16\u8bd1 Hooks",id:"\u7f16\u8bd1-hooks",level:2},{value:"\u96c6\u6210 Hooks",id:"\u96c6\u6210-hooks",level:2}],u={toc:l},m="wrapper";function c(n){let{components:e,...r}=n;return(0,o.kt)(m,(0,t.Z)({},u,r,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"hooks"},"Hooks"),(0,o.kt)("h2",{id:"\u4ecb\u7ecd"},"\u4ecb\u7ecd"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\u5728\u63d2\u4ef6\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"apply")," \u51fd\u6570\u4e2d\uff0c\u4f1a\u5f97\u5230\u4e00\u4e2a ",(0,o.kt)("inlineCode",{parentName:"p"},"runner")," \u5bf9\u8c61\uff0c\u5bf9\u8c61\u4e2d\u4f1a\u6709\u5982\u4e0b ",(0,o.kt)("inlineCode",{parentName:"p"},"takin")," \u63d0\u4f9b\u7684\u5185\u7f6e ",(0,o.kt)("inlineCode",{parentName:"p"},"hook"),"\uff0c\u63d2\u4ef6\u53ef\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"tap")," \u6765\u6ce8\u518c\u5bf9\u5e94\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"hook"),"\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"tap")," \u63a5\u53d7\u4e24\u4e2a\u53c2\u6570"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name"),": \u63d2\u4ef6\u540d"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"pluginHandle"),": \u63d2\u4ef6\u903b\u8f91"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\u82e5\u63d2\u4ef6\u6709\u8bbe\u7f6e\u53c2\u6570 ",(0,o.kt)("inlineCode",{parentName:"p"},"IMorJSPluginXXXOptions"),"\uff0c\u8bf7\u5c06 ",(0,o.kt)("inlineCode",{parentName:"p"},"options")," \u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"interface")," \u7ed9 ",(0,o.kt)("inlineCode",{parentName:"p"},"export")," \u51fa\u53bb\uff0c\u65b9\u4fbf\u53ef\u80fd\u9700\u8981\u96c6\u6210\u7684\u4f7f\u7528\u65b9\u8fdb\u884c\u5f15\u7528"))),(0,o.kt)("h2",{id:"\u57fa\u7840-hooks"},"\u57fa\u7840 Hooks"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import type { Plugin, Runner, UserConfig } from '@morjs/cli'\n\nexport interface IMorJSPluginXXXOptions {\n  key: value\n}\n\nexport default class MorJSPluginXXX implements Plugin {\n  name = 'MorJSPluginXXX'\n  pluginOptions: IMorJSPluginXXXOptions\n\n  constructor(options?: IMorJSPluginXXXOptions) {\n    this.pluginOptions = {\n      ...options\n    }\n  }\n\n  apply(runner: Runner) {\n    // initialize: \u521d\u59cb\u5316, \u5f53 runner \u88ab\u521d\u59cb\u5316\u5e76\u5b8c\u6210\u63d2\u4ef6\u52a0\u8f7d\u4e4b\u540e\u8fd0\u884c\n    runner.hooks.initialize.tap(this.name, () => {\n      // \u6253\u5370\u5f53\u524d MorJS \u7248\u672c\n      console.log(`\u5f53\u524d MorJS \u7248\u672c\u4e3a 1.0.0 \u2691`)\n    })\n\n    // cli: \u6784\u5efa\u547d\u4ee4\u884c\u65f6\u8fd0\u884c\uff0c\u53ef\u8fd0\u884c\u547d\u4ee4\u884c\u6ce8\u518c\uff0c\u83b7\u53d6\u5339\u914d\u7684\u547d\u4ee4\n    runner.hooks.cli.tap(this.name, (cli) => {\n      // \u6ce8\u518c abc \u547d\u4ee4\u884c\u5e76\u6dfb\u52a0\u4e00\u4e2a cde \u7684\u9009\u9879\uff0c\u4e8e\u662f\u7ec8\u7aef\u53ef\u6267\u884c mor abc --cde 123 \u547d\u4ee4\n      cli.command('abc', 'abc\u63cf\u8ff0').option('--cde [xxx]', 'cde\u63cf\u8ff0')\n    })\n\n    // matchedCommand: \u83b7\u53d6\u5230\u5339\u914d\u547d\u4ee4\u7684\u9636\u6bb5\n    runner.hooks.matchedCommand.tap(this.name, (command) => {\n      const { name, outputPath } = command.options\n      console.log(name, outputPath) // \u83b7\u53d6\u547d\u4ee4\u884c\u9009\u9879\n    })\n\n    // loadConfig: \u52a0\u8f7d\u7528\u6237 config \u9636\u6bb5\n    runner.hooks.loadConfig.tap(this.name, (command) => {\n      const { name, outputPath } = command.options\n      console.log(name, outputPath)\n    })\n\n    // modifyUserConfig: \u53ef\u57fa\u4e8e\u547d\u4ee4\u884c\u9009\u9879\u4fee\u6539\u7528\u6237\u914d\u7f6e\n    runner.hooks.modifyUserConfig.tap(this.name, (userConfig, command) => {\n      const { outputPath } = command.options\n      // \u83b7\u53d6\u547d\u4ee4\u884c outputPath \u9009\u9879\uff0c\u82e5\u6709\u5219\u4fee\u6539 userConfig \u7684 outputPath \u914d\u7f6e\u4e3a\u8be5\u503c\n      if (outputPath) userConfig.outputPath = outputPath\n      return userConfig\n    })\n\n    // registerUserConfig: \u6ce8\u518c\u7528\u6237\u914d\u7f6e\u53ca\u6821\u9a8c schema\n    runner.hooks.registerUserConfig.tap(this.name, (schema) => {\n      return schema.merge(UserConfigSchema)\n    })\n\n    // shouldRun: \u662f\u5426\u9700\u8981\u8fd0\u884c\u540e\u7eed\u903b\u8f91(\u6267\u884c\u7684\u65f6\u673a\u4e3a \u6821\u9a8c\u7528\u6237\u914d\u7f6e\u4e4b\u524d)\n    runner.hooks.shouldRun.tap(this.name, () => {\n      return true\n    })\n\n    // shouldValidateUserConfig: \u662f\u5426\u6821\u9a8c\u7528\u6237\u914d\u7f6e, \u90e8\u5206\u4e0d\u4f7f\u7528\u914d\u7f6e\u7684\u547d\u4ee4\n    // \u53ef\u4f7f\u7528\u8be5 hook \u7ed3\u5408 runner \u7684\u4e0a\u4e0b\u6587\uff0c\u6765\u9009\u62e9\u662f\u5426\u8df3\u8fc7\u7528\u6237\u914d\u7f6e\u6821\u9a8c\n    runner.hooks.shouldValidateUserConfig.tap(this.name, () => {\n      if (runner.commandName === 'clean') return false\n    })\n\n    // userConfigValidated: \u7528\u6237\u914d\u7f6e\u6821\u9a8c\u5b8c\u6210\u4e4b\u540e\u6267\u884c\n    runner.hooks.userConfigValidated.tap(this.name, (userConfig) => {\n      // \u8fd9\u4e2a\u9636\u6bb5\u53ef\u4ee5\u8fdb\u884c\u90e8\u5206\u914d\u7f6e\uff0c\u5982\u6dfb\u52a0 mor \u8fd0\u884c\u65f6\u76f8\u5173 loader \u5904\u7406\n      console.log(userConfig)\n    })\n\n    // beforeRun: \u5f00\u59cb run \u4e4b\u524d\u7684 hook, \u53ef\u7528\u4e8e\u51c6\u5907\u4e00\u4e9b\u8fd0\u884c\u547d\u4ee4\u9700\u8981\u7684\u6570\u636e\u6216\u5185\u5bb9\n    runner.hooks.beforeRun.tap(this.name, () => {\n      const userConfig = runner.userConfig\n      console.log(userConfig)\n    })\n\n    // run: \u8fd0\u884c\u547d\u4ee4\u903b\u8f91\n    runner.hooks.run.tap(this.name, (command) => {})\n\n    // done: runner \u8fd0\u884c\u5b8c\u6210\n    runner.hooks.done.tap(this.name, () => {\n      console.log(`\u7f16\u8bd1\u5b8c\u6210`)\n    })\n\n    // failed: runner \u8fd0\u884c\u5931\u8d25\n    runner.hooks.failed.tap(this.name, (error) => {\n      console.log('\u8fd0\u884c\u5931\u8d25, \u539f\u56e0:', error)\n    })\n\n    // shutdown: runner \u4e3b\u52a8\u5173\u95ed runner \u65f6\u6267\u884c\n    runner.hooks.shutdown.tap(this.name, () => {\n      // runner \u5173\u95ed\u65f6\u81ea\u52a8\u5173\u95ed server\n      if (devServer) await devServer.stop()\n      devServer = null\n    })\n  }\n}\n")),(0,o.kt)("h2",{id:"\u7f16\u8bd1-hooks"},"\u7f16\u8bd1 Hooks"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import type { Plugin, Runner, UserConfig } from '@morjs/cli'\n\nexport interface IMorJSPluginXXXOptions {\n  key: value\n}\n\nexport default class MorJSPluginXXX implements Plugin {\n  name = 'MorJSPluginXXX'\n  pluginOptions: IMorJSPluginXXXOptions\n\n  constructor(options?: IMorJSPluginXXXOptions) {\n    this.pluginOptions = {\n      ...options\n    }\n  }\n\n  apply(runner: Runner) {\n    // webpackWrapper: \u7528\u4e8e\u83b7\u53d6 webpackWrapper\n    runner.hooks.webpackWrapper.tap(this.name, (webpackWrapper) => {\n      // \u4fdd\u5b58 webpackWrapper \u63d0\u4f9b\u7ed9\u540e\u7eed\u6d41\u7a0b\u8c03\u7528\n      this.webpackWrapper = webpackWrapper\n    })\n\n    // compiler: \u7528\u4e8e\u83b7\u53d6 webpack compiler\n    runner.hooks.compiler.tap(this.name, (compiler) => {\n      const userConfig = runner.userConfig\n      console.log(userConfig)\n    })\n\n    // entryBuilder: \u7528\u4e8e\u83b7\u53d6 entryBuilder\n    runner.hooks.entryBuilder.tap(this.name, (entryBuilder) => {\n      this.entryBuilder = entryBuilder\n    })\n\n    // shouldAddPageOrComponent: \u7528\u4e8e\u5224\u65ad\u662f\u5426\u8981\u5904\u7406\u9875\u9762\u6216\u7ec4\u4ef6\n    runner.hooks.shouldAddPageOrComponent.tap(this.name, (pageOrComponent) => {\n      if (pageOrComponent.startsWith('dynamicLib://')) return false\n      return true\n    })\n\n    // addEntry: \u6dfb\u52a0 entry \u65f6\u89e6\u53d1, \u53ef\u7528\u4e8e\u4fee\u6539 entry \u76f8\u5173\u4fe1\u606f\n    runner.hooks.addEntry.tap(this.name, (entryInfo) => {\n      // \u628a 'pages/main/' \u9875\u9762\u7684\u4ea7\u7269\u653e\u5230 'src/pages/main' \u4e0b\n      if (entryInfo.name && entryInfo.name.startsWith('pages/main/')) {\n        entryInfo.entry.fullEntryName = 'src/' + entryInfo.entry.fullEntryName\n        entryInfo.entry.entryName = 'src/' + entryInfo.entry.entryName\n        entryInfo.entry.entryDir = 'src/' + entryInfo.entry.entryDir\n        entryInfo.name = 'src/' + entryInfo.name\n      }\n\n      return entryInfo\n    })\n\n    // beforeBuildEntries: \u89e3\u6790\u6240\u6709 entries \u6587\u4ef6\u4e4b\u540e, \u751f\u6210 entries \u4e4b\u524d\u6267\u884c\n    runner.hooks.beforeBuildEntries.tap(this.name, (entryBuilder) => {\n      EntryBuilderMap.set(runner, entryBuilder)\n    })\n\n    // afterBuildEntries: \u7528\u4e8e\u83b7\u53d6\u5e76\u4fee\u6539\u6784\u5efa\u51fa\u6765\u7684 entries\n    runner.hooks.afterBuildEntries.tap(this.name, (entries, entryBuilder) => {\n      this.entryBuilder = entryBuilder\n      return entries\n    })\n\n    // configParser: config(json) \u6587\u4ef6\u89e3\u6790 hook\n    runner.hooks.configParser.tap(this.name, (config, options) => {\n      // \u5220\u9664\u6296\u97f3\u7f16\u8bd1\u4e0b\uff0c\u6240\u6709 json \u6587\u4ef6\u7684 componentPlaceholder \u5185\u5bb9\n      if (options.userConfig.target === 'bytedance') {\n        if (config?.componentPlaceholder) {\n          delete config.componentPlaceholder\n        }\n      }\n      return config\n    })\n\n    // scriptParser: script(js/ts) \u6587\u4ef6\u89e3\u6790 hook\n    runner.hooks.scriptParser.tap(this.name, (transformers, options) => {\n      // \u7ed9 app.ts \u6587\u4ef6\u7684 CApp({}) \u65b9\u6cd5\u63d2\u5165 { globalApp: morGlobal.initApp } \u4f5c\u4e3a\u6700\u540e\u4e00\u4e2a\u53c2\u6570\n      if (!options.fileInfo.content?.includes('CApp')) return transformers\n\n      transformers = transformers || {}\n      transformers.before = transformers.before || []\n\n      const transformer = tsTransformerFactory((node, context) => {\n        const factory = context.factory\n        if (\n          ts.isExpressionStatement(node) &&\n          ts.isCallExpression(node.expression) &&\n          ts.isIdentifier(node.expression.expression) &&\n          node.expression.expression.escapedText === 'CApp'\n        ) {\n          args.push(\n            factory.createObjectLiteralExpression(\n              [\n                factory.createPropertyAssignment(\n                  factory.createIdentifier('globalApp'),\n                  factory.createPropertyAccessExpression(\n                    factory.createIdentifier('morGlobal'),\n                    factory.createIdentifier('initApp')\n                  )\n                )\n              ],\n              false\n            )\n          )\n\n          return [\n            factory.createExpressionStatement(\n              factory.createCallExpression(\n                factory.createIdentifier('CApp'),\n                undefined,\n                [...node.expression.arguments, ...args]\n              )\n            )\n          ]\n        }\n\n        return node\n      })\n\n      transformers.before.push(transformer)\n      return transformers\n    })\n\n    // templateParser: template(*xml) \u6587\u4ef6\u89e3\u6790 hook\n    runner.hooks.templateParser.tap(this.name, (tree, options) => {\n      // \u66ff\u6362 wxml \u4e2d\u7684 morstyle \u4e3a style\n      return tree.walk((node) => {\n        if (node.attrs && node.attrs.morStyle) {\n          node.attrs.style = node.attrs.morStyle\n          delete node.attrs.morStyle\n        }\n\n        return node\n      })\n    })\n\n    // styleParser: style(*css) \u6587\u4ef6\u89e3\u6790 hook\n    runner.hooks.styleParser.tap(this.name, (plugins, options) => {\n      return plugins\n        .concat\n        // \u8fdb\u884c\u4e00\u4e9b\u5173\u4e8e *css \u6587\u4ef6\u7684\u5904\u7406\n        ()\n    })\n\n    // sjsParser: sjs(wxs/sjs) \u6587\u4ef6\u89e3\u6790 hook\n    runner.hooks.sjsParser.tap(this.name, (transformers, options) => {\n      // \u6dfb\u52a0 commonjs => esm \u8f6c\u6362 \u4fee\u6539\u5f15\u7528\u8def\u5f84\n      if (\n        options.fileInfo.content.includes('import') ||\n        options.fileInfo.content.includes('require')\n      ) {\n        this.alterImportOrRequirePath(transformers, options.fileInfo.path)\n      }\n\n      return transformers\n    })\n\n    // preprocessorParser: \u6587\u4ef6\u9884\u5904\u7406\u5668 hook\uff0c\u8be5\u9636\u6bb5\u4f1a\u5904\u7406\u6761\u4ef6\u7f16\u8bd1\n    runner.hooks.preprocessorParser.tap(\n      this.name,\n      (fileContent, context, options) => {\n        if (!/\\.(j|t)s$/.test(fileInfo.path)) return fileContent\n        // \u5bf9 js/ts \u6587\u4ef6\u8fdb\u884c\u4e00\u4e9b\u524d\u7f6e\u5904\u7406\n        return fileContent\n      }\n    )\n\n    // postprocessorParser: \u6587\u4ef6\u540e\u7f6e\u5904\u7406\u5668 hook\n    runner.hooks.postprocessorParser.tap(this.name, (fileContent, options) => {\n      if (!/\\.(w|a)xml$/.test(fileInfo.path)) return fileContent\n      // \u5bf9 *xml \u6587\u4ef6\u8fdb\u884c\u4e00\u4e9b\u540e\u7f6e\u5904\u7406\n      return fileContent\n    })\n  }\n}\n")),(0,o.kt)("h2",{id:"\u96c6\u6210-hooks"},"\u96c6\u6210 Hooks"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import type { Plugin, Runner, UserConfig } from '@morjs/cli'\n\nexport interface IMorJSPluginXXXOptions {\n  key: value\n}\n\nexport default class MorJSPluginXXX implements Plugin {\n  name = 'MorJSPluginXXX'\n  pluginOptions: IMorJSPluginXXXOptions\n\n  constructor(options?: IMorJSPluginXXXOptions) {\n    this.pluginOptions = {\n      ...options\n    }\n  }\n\n  apply(runner: Runner) {\n    // moduleDownloaded: \u4e0b\u8f7d\u6a21\u5757\u9636\u6bb5, \u5b8c\u6210\u540e\u89e6\u53d1\n    runner.hooks.moduleDownloaded.tapPromise(this.name, (moduleInfo) => {\n      const { target } = runner.userConfig\n      if (target) {\n        // \u5bf9 moduleInfo \u8fdb\u884c scripts \u811a\u672c\u4fee\u6539\u7b49\u64cd\u4f5c\n      }\n    })\n\n    // moduleBeforeScriptsExecuted: \u524d\u7f6e\u811a\u672c\u9636\u6bb5, \u5b8c\u6210\u540e\u89e6\u53d1\n    runner.hooks.moduleBeforeScriptsExecuted.tapPromise(\n      this.name,\n      (moduleInfo) => {\n        const { target } = runner.userConfig\n        if (['alipay', 'taobao'].includes(target)) {\n          // \u5bf9\u652f\u4ed8\u5b9d\u3001\u6dd8\u5b9d\u7aef\u5b8c\u6210\u524d\u7f6e\u811a\u672c\u540e\u8fdb\u884c\u4e00\u4e9b\u6587\u4ef6\u5904\u7406\n        }\n      }\n    )\n\n    // moduleConfigLoaded: \u914d\u7f6e\u8f7d\u5165\u9636\u6bb5, \u5b8c\u6210\u540e\u89e6\u53d1\n    runner.hooks.moduleConfigLoaded.tapPromise(this.name, (moduleInfo) => {\n      const { target } = runner.userConfig\n      if (target === 'wechat') {\n        // \u5bf9\u5fae\u4fe1\u7aef\u914d\u7f6e\u8f7d\u5165\u540e\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\u6d41\u7a0b\n      }\n    })\n\n    // moduleCopiedOrCompiled: \u590d\u5236\u7f16\u8bd1\u9636\u6bb5, \u5b8c\u6210\u540e\u89e6\u53d1\n    runner.hooks.moduleCopiedOrCompiled.tapPromise(this.name, (moduleInfo) => {\n      const { target } = runner.userConfig\n      if (target === 'bytedance') {\n        // \u5bf9\u6296\u97f3\u7aef\u590d\u5236\u7f16\u8bd1\u5b8c\u6210\u540e\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\u6d41\u7a0b\n      }\n    })\n\n    // moduleAfterScriptsExecuted: \u540e\u7f6e\u811a\u672c\u9636\u6bb5, \u5b8c\u6210\u540e\u89e6\u53d1\n    runner.hooks.moduleAfterScriptsExecuted.tapPromise(\n      this.name,\n      (moduleInfo) => {\n        const { target } = runner.userConfig\n        if (target === 'wechat') {\n          // \u5bf9\u5fae\u4fe1\u7aef scripts.after \u811a\u672c\u6267\u884c\u5b8c\u6210\u540e\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\u6d41\u7a0b\n        }\n      }\n    )\n\n    // moduleComposed: \u6a21\u5757\u96c6\u6210\u9636\u6bb5, \u5b8c\u6210\u540e\u89e6\u53d1\n    runner.hooks.moduleComposed.tapPromise(this.name, (moduleInfo) => {\n      const { target } = runner.userConfig\n      if (target === 'wechat') {\n        // \u5bf9\u5fae\u4fe1\u7aef\u96c6\u6210\u5b8c\u6210\u6210\u540e\u8fdb\u884c\u4e00\u4e9b\u6587\u4ef6\u64cd\u4f5c\n      }\n    })\n\n    // moduleFailedAttempt: \u5931\u8d25\u91cd\u8bd5\u9636\u6bb5\uff0c\u6a21\u5757\u96c6\u6210\u5931\u8d25\u540e\u5c06\u81ea\u52a8\u5c1d\u8bd5\u4fee\u590d\n    runner.hooks.moduleFailedAttempt.tapPromise(this.name, (moduleInfo) => {\n      // \u6a21\u5757\u96c6\u6210\u5931\u8d25\u540e\u91cd\u8bd5\u9636\u6bb5\u4ecb\u5165\u4e00\u4e0b\u9519\u8bef\u8f93\u51fa\u4e0a\u62a5\u6216\u76f8\u5173\u64cd\u4f5c\n    })\n  }\n}\n")))}c.isMDXComponent=!0}}]);